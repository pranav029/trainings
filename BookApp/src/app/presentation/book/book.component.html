<div style="background-color: antiquewhite;height: 100%;">
    <div style="display: flex;flex-direction: column;align-items: center;padding-top: 32px;">
        <button *ngIf="isButtonVisible" mat-flat-button color="primary" (click)="onAddClick()"> Add Book</button>
       
        <mat-card *ngIf="!isButtonVisible" style="width: 30%;">
           
            <mat-card-title style="align-self: center;padding-top: 8px;">
                Add Book to Table
                <mat-icon (click)="onCloseClick()" style="vertical-align: middle;">close</mat-icon>
            </mat-card-title>
            
            <div style="display: flex;flex-direction: column;padding: 8px;">

                <mat-form-field appearance="outline">
                    <mat-label>Book Name</mat-label>
                    <input matInput max="20" placeholder="Enter book name" [(ngModel)]="formBook.bName">
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Author Name</mat-label>
                    <input matInput max="20" minlength="8" placeholder="Enter author name" [(ngModel)]="formBook.aName">
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Publishing Year</mat-label>
                    <input matInput type="number" min="0" placeholder="Enter publishing year"
                        [(ngModel)]="formBook.pYear">
                    <mat-error>Min length is 8</mat-error>
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Select Language</mat-label>
                    <mat-select [(ngModel)]="formBook.language">
                        <mat-option value="English">English</mat-option>
                        <mat-option value="Hindi">Hindi</mat-option>
                        <mat-option value="Sanskrit">Sanskrit</mat-option>
                    </mat-select>
                </mat-form-field>

                <p *ngIf="formBook.bName.length<1 || formBook.aName.length<1 || formBook.pYear.length<1 || formBook.language.length<1"
                    style="color: red;align-self: center;">One or more fields are empty</p>

                <button *ngIf="!isSaveInProgress" (click)="onSave()" mat-flat-button color="primary"
                    style="width: fit-content;align-self: center;"
                    [disabled]="formBook.bName.length<1 || formBook.aName.length<1 || formBook.pYear.length<1 || formBook.language.length<1 || formBook.aName.length<8">Add
                    Book</button>

                <mat-spinner *ngIf="isSaveInProgress" diameter="30" style="align-self: center;"></mat-spinner>

            </div>
        </mat-card>
    </div>



    <!-- Book table part -->
    <div  style="display: flex;flex-direction: column; margin: 32px;">
        <label *ngIf="erroMessage.length>0" style="align-self: center;color: red;">{{erroMessage}}</label>
        <mat-spinner *ngIf="isLoadInProgress" diameter="40" style="align-self: center;"></mat-spinner>
        <table *ngIf="books.length>0" mat-table [dataSource]="books" class="mat-elevation-z8">

            <ng-container matColumnDef="position">
                <th mat-header-cell *matHeaderCellDef> No. </th>
                <td mat-cell *matCellDef="let element"> {{element.id}} </td>
            </ng-container>

            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef> Book Name </th>
                <td mat-cell *matCellDef="let element"> {{element.bName}} </td>
            </ng-container>

            <ng-container matColumnDef="author">
                <th mat-header-cell *matHeaderCellDef> Author Name </th>
                <td mat-cell *matCellDef="let element"> {{element.aName}} </td>
            </ng-container>


            <ng-container matColumnDef="year">
                <th mat-header-cell *matHeaderCellDef> Publishing Year</th>
                <td mat-cell *matCellDef="let element"> {{element.pYear}} </td>
            </ng-container>
            <ng-container matColumnDef="language">
                <th mat-header-cell *matHeaderCellDef> Language</th>
                <td mat-cell *matCellDef="let element"> {{element.language}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>
</div>